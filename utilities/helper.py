prop_name_mapping = {
    "Purdue Boilermakers": ['Purdue'],
    "Rhode Island Rams": ['Rhode Island'],
    "UC Irvine Anteaters": ['UC Irvine'],
    "Pittsburgh Panthers": ['Pittsburgh'],
    "Illinois Fighting Illini": ['Illinois'],
    "Maryland Terrapins": ['Maryland'],
    "Navy Midshipmen": ['Navy'],
    "Texas Longhorns": ['Texas'],
    "Charleston Cougars":["College of Charleston","Charleston"],
    "Louisiana Tech Bulldogs":["Louisiana Tech"],
    "Toledo Rockets":["Toledo"],
    "Portland Pilots":["Portland"],
    "North Texas Mean Green":["North Texas"],
    "UI Chicago Flames":["UIC", "Illinois-Chicago", "UI Chicago"],
    "Milwaukee Panthers":["Milwaukee", "Wis.-Milwaukee"],
    "UT Martin Skyhawks":["UT Martin", "Tenn-Martin"],
    "Towson Tigers":["Towson"],
    "Miami Redhawks":["Miami (OH)", "Miami Ohio"],
    "UNC Wilmington Seahawks":["UNC Wilmington", "NC-Wilmington"],
    "Florida Gators":["Florida"],
    "Boston College Eagles":["Boston College"],
    "Saint Francis Brooklyn Terriers":["St. Francis Brooklyn", 'St. Francis (NY)', "Saint Francis", 'St. Francis (BKN)',],
    "Ohio State Buckeyes":["Ohio State","Ohio St."],
    "Tennessee Tech Golden Eagles":["Tennessee Tech"],
    "North Carolina State Wolfpack":["North Carolina State", "N.C. State", "NC State"],
    "Marshall Thundering Herd":["Marshall"],
    "Georgetown Hoyas":["Georgetown"],
    "Old Dominion Monarchs":["Old Dominion"],
    "Virginia Cavaliers":["Virginia"],
    "William & Mary Tribe":["William & Mary"],
    "Virginia Military Institute Keydets":["VMI", "Virginia Military Institute"],
    "Stony Brook Seawolves":["Stony Brook"],
    "Connecticut Huskies":["Connecticut"],
    "Stetson Hatters":["Stetson"],
    "Wake Forest Demon Deacons":["Wake Forest"],
    "The Citadel Bulldogs":["Citadel", "The Citadel"],
    "Richmond Spiders":["Richmond"],
    "Columbia Lions":["Columbia"],
    "La Salle Explorers":["La Salle"],
    "Lipscomb Bison":["Lipscomb"],
    "North Carolina Tarheels":["North Carolina"],
    "Liberty Flames":["Liberty"],
    "North Carolina Central Eagles":["North Carolina Central"],
    "Morehead State Eagles":["Morehead State", "Morehead St."],
    "Campbell Fighting Camels":["Campbell"],
    "Virginia Tech Hokies":["Virginia Tech"],
    "UNC Greensboro Spartans":["NC-Greensboro","UNC Greensboro"],
    "Virginia Commonwealth Rams":["VCU", "Virginia Commonwealth"],
    "East Carolina Pirates":["East Carolina"],
    "Seton Hall Pirates":["Seton Hall"],
    "Temple Owls":["Temple"],
    "Pennsylvania State Nittany Lions":["Penn State", "Penn St."],
    "Saint Francis Red Flash":["St. Francis (PA)","Saint Francis"],
    "American Eagles":["American U.","American"],
    "Mississippi Valley State Delta Devils":["Mississippi Valley State"],
    "Georgia Bulldogs":["Georgia"],
    "Georgia Tech Yellow Jackets":["Georgia Tech"],
    "Charleston Southern Buccaneers":["Charleston Southern"],
    "Kennesaw State Owls":["Kennesaw St.","Kennesaw State"],
    "Bradley Braves":["Bradley"],
    "Savannah State Tigers":["Savannah State"],
    "Stephen F. Austin Lumberjacks":["Stephen F. Austin"],
    "Nicholls Colonels":["Nicholls State","Nicholls"],
    "Houston Cougars":["Houston"],
    "UT Arlington Mavericks":["Texas-Arlington","UT Arlington"],
    "North Dakota Fighting Hawks":["North Dakota"],
    "UL Monroe Warhawks":["UL Monroe", "Louisiana-Monroe", "Louisiana Monroe"],
    "Texas Tech Red Raiders":["Texas Tech"],
    "Tennessee State Tigers":["Tennessee State", "Tennessee St."],
    "Mississippi State Bulldogs":["Mississippi State", "Mississippi St."],
    "Longwood Lancers":["Longwood"],
    "Kansas Jayhawks":["Kansas"],
    "Brown Bears":["Brown"],
    "Fordham Rams":["Fordham"],
    "Middle Tennessee State Blue Raiders":["Middle Tennessee State", "Middle Tennessee St.", "Middle Tennessee"],
    "Western Illinois Leathernecks":["Western Illinois"],
    "Eastern Illinois Panthers":["Eastern Illinois"],
    "South Dakota State Jackrabbits":["South Dakota State", "South Dakota St."],
    "Arkansas State Red Wolves":["Arkansas State", "Arkansas St."],
    "Mississippi Rebels":["Mississippi", "Ole Miss"],
    "New Mexico State Aggies":["New Mexico State", "New Mexico St."],
    "Alabama State Hornets":["Alabama State", "Alabama St."],
    "Creighton Bluejays":["Creighton"],
    "UL Lafayette Rajin' Cajuns":["Louisiana", "Louisiana-Lafayette", "UL Lafayette"],
    "Valparaiso Beacons":["Valparaiso"],
    "Georgia Southern Eagles":["Georgia Southern"],
    "Notre Dame Fighting Irish":["Notre Dame"],
    "Eastern Michigan Eagles":["Eastern Michigan"],
    "Michigan State Spartans":["Michigan State", "Michigan St.", "Michigan St"],
    "Saint Bonaventure Bonnies":["St. Bonaventure", "Saint Bonaventure"],
    "San Jose State Spartans":["San Jose State", "San Jose St."],
    "Canisius Golden Griffins":["Canisius"],
    "Eastern Washington Eagles":["Eastern Washington"],
    "Santa Clara Broncos":["Santa Clara"],
    "California State Bakersfield Roadrunners":["California State Bakersfield", "Cal. State - Bakersfield", "CSU Bakersfield"],
    "Southern Jaguars":["Southern"],
    "Gonzaga Bulldogs":["Gonzaga"],
    "UT San Antonio Roadrunners":["UT San Antonio", "UTSA", "Texas-San Antonio"],
    "Fresno State Bulldogs":["Fresno State", "Fresno St."],
    "Brigham Young Cougars":["Brigham Young", "BYU"],
    "Oakland Golden Grizzlies":["Oakland"],
    "West Virginia Mountaineers":["West Virginia"],
    "Maine Black Bears":["Maine"],
    "Utah Valley Wolverines":["Utah Valley", "UVU"],
    "Marquette Golden Eagles":["Marquette"],
    "Prairie View A&M Panthers":["Prairie View A&M"],
    "UNC Asheville Bulldogs":["UNC Asheville", "N.C. Asheville"],
    "Auburn Tigers":["Auburn"],
    "Grand Canyon Antelopes":["Grand Canyon"],
    "Utah Utes":["Utah"],
    "Rice Owls":["Rice"],
    "Grambling State Tigers":["Grambling State", "Grambling St."],
    "Baylor Bears":["Baylor"],
    "Oral Roberts Golden Eagles":["Oral Roberts"],
    "Missouri State Bears":["Missouri State", "Missouri St."],
    "Idaho State Bengals":["Idaho State", "Idaho St."],
    "Colorado Buffaloes":["Colorado"],
    "North Dakota State Bison":["North Dakota State", "North Dakota St."],
    "Oregon Ducks":["Oregon"],
    "California State Northridge Matadors":["California State Northridge", "CSU Northridge"],
    "UC Los Angeles Bruins":["UC Los Angeles", "UCLA"],
    "Seattle Redhawks":["Seattle"],
    "San Francisco Dons":["San Francisco"],
    "Montana State Bobcats":["Montana State", "Montana St."],
    "Hawaii Rainbow Warriors":["Hawaii"],
    "Gardner-Webb Runnin' Bulldogs":["Gardner-Webb"],
    "Charlotte 49ers":["Charlotte"],
    "Kent State Golden Flashes":["Kent State", "Kent St."],
    "Iona Gaels":["Iona"],
    "UT Rio Grande Valley Vaqueros":["UT Rio Grande Valley", "Texas Rio Grande Valley", "UTPA", "Texas-Pan American"],
    "Indiana State Sycamores":["Indiana State", "Indiana St."],
    "Florida Gulf Coast Eagles":["Florida Gulf Coast", "FGCU"],
    "Indiana Hoosiers":["Indiana"],
    "Boston Terriers":["Boston", "Boston University", "Boston U"],
    "Northeastern Huskies":["Northeastern"],
    "Lafayette Leopards":["Lafayette"],
    "Wagner Seahawks":["Wagner"],
    "Northern Iowa Panthers":["Northern Iowa"],
    "Syracuse Orange":["Syracuse"],
    "Army Black Knights":["Army"],
    "UC Davis Aggies":["UC Davis"],
    "Florida Atlantic Owls":["Florida Atlantic", "FAU"],
    "Western Michigan Broncos":["Western Michigan"],
    "Xavier Musketeers":["Xavier"],
    "Tulane Green Wave":["Tulane"],
    "Maryland Eastern Shore Hawks":["Maryland Eastern Shore", "Maryland - E. Shore", "Maryland-Eastern Shore"],
    "Rutgers Scarlet Knights":["Rutgers"],
    "Princeton Tigers":["Princeton"],
    "East Tennessee State Buccaneers":["East Tennessee State", "East Tennessee St."],
    "Kentucky Wildcats":["Kentucky"],
    "Bowling Green Falcons":["Bowling Green"],
    "Howard Bison":["Howard"],
    "Furman Paladins":["Furman"],
    "Norfolk State Spartans":["Norfolk State", "Norfolk St."],
    "Long Island Sharks":["Long Island", "LIU", "LIU Brooklyn"],
    "Southern Mississippi Golden Eagles":["Southern Mississippi", "Southern Miss"],
    "South Florida Bulls":["South Florida", "USF"],
    "Central Florida Knights":["Central Florida", "UCF"],
    "Mercer Bears":["Mercer"],
    "Samford Bulldogs":["Samford"],
    "Youngstown State Penguins":["Youngstown State", "Youngstown St."],
    "Jacksonville Dolphins":["Jacksonville"],
    "Miami Hurricanes":["Miami", "Miami (FL)", "Miami - Florida", "Miami-Florida"],
    "Cornell Big Red":["Cornell"],
    "Albany Great Danes":["Albany"],
    "Western Kentucky Hilltoppers":["Western Kentucky", "WKU"],
    "Saint Joseph's Hawks":["St. Joseph's", "St. Joseph's", "St. Joseph's (PA)", "Saint Joseph's"],
    "Denver Pioneers":["Denver"],
    "UC Santa Barbara Gauchos":["UC Santa Barbara"],
    "Coastal Carolina Chanticleers":["Coastal Carolina"],
    "Massachusetts Minutemen":["Massachusetts", "UMass"],
    "Rider Broncs":["Rider"],
    "Cleveland State Vikings":["Cleveland State", "Cleveland St."],
    "Bryant Bulldogs":["Bryant"],
    "Akron Zips":["Akron"],
    "Troy Trojans":["Troy"],
    "Florida International Panthers":["Florida International", "FIU"],
    "Iowa State Cyclones":["Iowa State", "Iowa St."],
    "Northern Arizona Lumberjacks":["Northern Arizona", "NAU"],
    "Nebraska Cornhuskers":["Nebraska"],
    "South Dakota Coyotes":["South Dakota"],
    "Louisiana State Tigers":["Louisiana State", "LSU", "Louisiana St."],
    "Northwestern State Demons":["Northwestern State", "Northwestern St."],
    "Vanderbilt Commodores":["Vanderbilt"],
    "Presbyterian Blue Hose":["Presbyterian"],
    "Wofford Terriers":["Wofford"],
    "Minnesota Golden Gophers":["Minnesota"],
    "Western Carolina Catamounts":["Western Carolina"],
    "Clemson Tigers":["Clemson"],
    "Appalachian State Mountaineers":["Appalachian State", "Appalachian St."],
    "Tulsa Golden Hurricane":["Tulsa"],
    "Drexel Dragons":["Drexel"],
    "Loyola Maryland Greyhounds":["Loyola Maryland", "Loyola-Maryland", "Loyola (MD)"],
    "Alcorn State Braves":["Alcorn State", "Alcorn St."],
    "Texas A&M Aggies":["Texas A&M"],
    "Coppin State Eagles":["Coppin State", "Coppin St."],
    "Oklahoma Sooners":["Oklahoma"],
    "Chicago State Cougers":["Chicago State", "Chicago St."],
    "Bucknell Bison":["Bucknell"],
    "Villanova Wildcats":["Villanova"],
    "UM Kansas City Roos":["UM Kansas City", "UMKC", "Kansas City"],
    "Lamar Cardinals":["Lamar"],
    "South Alabama Jaguars":["South Alabama"],
    "Texas State Bobcats":["Texas State", "Texas St."],
    "Eastern Kentucky Colonels":["Eastern Kentucky"],
    "Loyola Chicago Ramblers":["Loyola Chicago", "Loyola-Chicago"],
    "Austin Peay Governors":["Austin Peay"],
    "Saint Louis Billikens":["Saint Louis"],
    "Florida A&M Rattlers":["Florida A&M"],
    "Alabama Crimson Tide":["Alabama"],
    "Southeastern Louisiana Lions":["Southeastern Louisiana"],
    "Centenary Gentlemen":["Centenary"],
    "Memphis Tigers":["Memphis"],
    "North Florida Ospreys":["North Florida"],
    "Florida State Seminoles":["Florida State", "Florida St."],
    "James Madison Dukes":["James Madison"],
    "Kansas State Wildcats":["Kansas State", "Kansas St."],
    "UA Little Rock Trojans":["UA Little Rock", "Arkansas-Little Rock", "Little Rock"],
    "Southern Methodist Mustangs":["Southern Methodist", "SMU"],
    "Elon Phoenix":["Elon", "Elon University"],
    "South Carolina Gamecocks":["South Carolina"],
    "Northwestern Wildcats":["Northwestern"],
    "Northern Illinois Huskies":["Northern Illinois"],
    "Jackson State Tigers":["Jackson State", "Jackson St."],
    "Texas Christian Horned Frogs":["Texas Christian", "TCU"],
    "Purdue Fort Wayne Mastodons":["Purdue Fort Wayne", "IUPU - Ft. Wayne"],
    "Southern Illinois Edwardsville Cougars":["Southern Illinois Edwardsville", "SIU - Edwardsville", "SIU Edwardsville"],
    "Chattanooga Mocs":["Chattanooga"],
    "Tennessee Volunteers":["Tennessee"],
    "Pacific Tigers":["Pacific"],
    "UT El Paso Miners":["UT El Paso", "UTEP", "Texas-El Paso"],
    "Northern Colorado Bears":["Northern Colorado"],
    "Morgan State Bears":["Morgan State", "Morgan St."],
    "Loyola Marymount Lions":["Loyola Marymount"],
    "San Diego Toreros":["San Diego"],
    "Pepperdine Waves":["Pepperdine"],
    "Portland State Vikings":["Portland State", "Portland St."],
    "UC Riverside Highlanders":["UC Riverside"],
    "UN Las Vegas Rebels":["UN Las Vegas", "UNLV"],
    "Saint Mary's Gaels":["Saint Mary's", "St. Mary's"],
    "Central Michigan Chippewas":["Central Michigan"],
    "California State Fullerton Titans":["California State Fullerton", "Cal. State - Fullerton", "Cal St. Fullerton", "CSU Fullerton"],
    "Buffalo Bulls":["Buffalo"],
    "Delaware Fightin' Blue Hens":["Delaware"],
    "Ohio Bobcats":["Ohio"],
    "Mount Saint Mary's Mountaineers":["Mount Saint Mary's", "Mount St. Mary's"],
    "Dayton Flyers":["Dayton"],
    "New Orleans Privateers":["New Orleans"],
    "Harvard Crimson":["Harvard"],
    "George Mason Patriots":["George Mason"],
    "McNeese State Cowboys":["McNeese State", "McNeese St."],
    "Washington Huskies":["Washington"],
    "Hofstra Pride":["Hofstra"],
    "Queens Royals":["Queens", "Queens University of Charlotte"],
    "Winthrop Eagles":["Winthrop"],
    "Central Connecticut State Blue Devils":["Central Connecticut State", "Central Connecticut St.", "Central Conn. St."],
    "Hartford Hawks":["Hartford"],
    "Bethune-Cookman Wildcats":["Bethune-Cookman"],
    "High Point Panthers":["High Point"],
    "Dartmouth Big Green":["Dartmouth"],
    "Providence Friars":["Providence"],
    "Binghamton Bearcats":["Binghamton"],
    "Colgate Raiders":["Colgate"],
    "Holy Cross Crusaders":["Holy Cross"],
    "Boise State Broncos":["Boise State", "Boise St."],
    "South Carolina State Bulldogs":["South Carolina State", "South Carolina St."],
    "Southern Illinois Salukis":["Southern Illinois"],
    "Quinnipiac Bobcats":["Quinnipiac"],
    "Yale Bulldogs":["Yale"],
    "Central Arkansas Bears":["Central Arkansas"],
    "Texas Southern Tigers":["Texas Southern"],
    "Drake Bulldogs":["Drake"],
    "Jacksonville State Gamecocks":["Jacksonville State", "Jacksonville St."],
    "Weber State Wildcats":["Weber State", "Weber St."],
    "Utah State Aggies":["Utah State", "Utah St."],
    "Wyoming Cowboys":["Wyoming"],
    "Idaho Vandals":["Idaho"],
    "Texas A&M Corpus Christi Islanders":["Texas A&M Corpus Christi", "Texas A&M CC", "Texas A&M-CC"],
    "Manhattan Jaspers":["Manhattan"],
    "New Jersey Tech Highlanders":["New Jersey Tech", "NJIT"],
    "Butler Bulldogs":["Butler"],
    "UW Green Bay Phoenix":["UW Green Bay", "Green Bay", "Wis.-Green Bay"],
    "Sacred Heart Pioneers":["Sacred Heart"],
    "Fairfield Stags":["Fairfield"],
    "Saint Peter's Peacocks":["Saint Peter's", "St. Peter's"],
    "Robert Morris Colonials":["Robert Morris"],
    "Southern California Trojans":["Southern California", "USC"],
    "Radford Highlanders":["Radford"],
    "Houston Christian Huskies":["Houston Christian", "Houston Baptist"],
    "Oklahoma State Cowboys":["Oklahoma State", "Oklahoma St."],
    "Montana Grizzlies":["Montana"],
    "Nevada Wolf Pack":["Nevada"],
    "New Hampshire Wildcats":["New Hampshire"],
    "South Carolina Upstate Spartans":["South Carolina Upstate", "USC Upstate"],
    "Michigan Wolverines":["Michigan"],
    "Duquesne Dukes":["Duquesne"],
    "Vermont Catamounts":["Vermont"],
    "Siena Saints":["Siena"],
    "Davidson Wildcats": ['Davidson'],
    "Pennsylvania Quakers": ['Pennsylvania', "Penn"],
    "San Diego State Aztecs":["San Diego State", "San Diego St."],
    "Long Beach State Beach":["Long Beach State", "Long Beach St."],
    "Delaware State Hornets":["Delaware State", "Delaware St."],
    "Southeast Missouri State Redhawks":["Southeast Missouri State", "Southeast Missouri St.", "SE Missouri St."],
    "UA Birmingham Blazers": ['UA Birmingham', "UAB"],
    "Washington State Cougars":["Washington State", "Washington St."],
    "Alabama A&M Bulldogs": ['Alabama A&M'],
    "Evansville Purple Aces": ['Evansville'],
    "Sam Houston State Bearkats":["Sam Houston State", "Sam Houston St."],
    "UA Pinebluff Golden Lions": ['UA Pinebluff', "Arkansas-Pine Bluff"],
    "Colorado State Rams":["Colorado State", "Colorado St."],
    "Detroit Mercy Titans": ['Detroit Mercy', "Detroit"],
    "New Mexico Lobos": ['New Mexico'],
    "Ball State Cardinals":["Ball State", "Ball St."],
    "Illinois State Redbirds":["Illinois State", "Illinois St."],
    "IU Indianapolis Jaguars": ['IU Indy', "Indiana - Purdue", "IUPUI"],
    "Oregon State Beavers":["Oregon State", "Oregon St."],
    "Arizona Wildcats": ['Arizona'],
    "Wisconsin Badgers": ['Wisconsin'],
    "Sacramento State Hornets":["Sacramento State", "Sacramento St."],
    "North Carolina A&T Aggies": ['North Carolina A&T', "No.Carolina A&T"],
    "UM Baltimore County Retrievers": ['UM Baltimore County', "UMBC", "MD Baltimore Cty", "MD Baltimore City", "MD Baltimore County"],
    "Air Force Falcons": ['Air Force'],
    "Duke Blue Devils": ['Duke'],
    "DePaul Blue Demons": ['DePaul'],
    "Wright State Raiders":["Wright State", "Wright St."],
    "California Polytechnic State Mustangs":["California Polytechnic State", "California Polytechnic St.", "Cal Poly", "Cal Poly SLO"],
    "Cincinnati Bearcats": ['Cincinnati'],
    "Lehigh Mountain Hawks": ['Lehigh'],
    "Murray State Racers":["Murray State", "Murray St."],
    "Saint John's Red Storm": ["Saint John's", "St. John's"],
    "Stanford Cardinal": ['Stanford'],
    "UC San Diego Tritons": ['UC San Diego'],
    "Fairleigh Dickinson Knights": ['Fairleigh Dickinson'],
    "Marist Red Foxes": ['Marist'],
    "Niagara Purple Eagles": ['Niagara'],
    "Monmouth Hawks": ['Monmouth', "Monmouth-NJ"],
    "Southern Utah Thunderbirds": ['Southern Utah'],
    "Georgia State Panthers":["Georgia State", "Georgia St.", "Georgia St"],
    "Hampton Pirates": ['Hampton'],
    "George Washington Revolutionaries": ['George Washington'],
    "Arizona State Sun Devils":["Arizona State", "Arizona St."],
    "Arkansas Razorbacks": ['Arkansas'],
    "Iowa Hawkeyes": ['Iowa'],
    "Wichita State Shockers":["Wichita State", "Wichita St."],
    "Belmont Bruins": ['Belmont'],
    "Louisville Cardinals": ['Louisville'],
    "Missouri Tigers": ['Missouri'],
    "California Golden Bears": ['California'],
    "UN Omaha Mavericks": ['UN Omaha', "Nebraska Omaha"],
    "Northern Kentucky Norse": ['Northern Kentucky'],
    "UM Lowell Riverhawks": ['UM Lowell', "Massachusetts Lowell"],
    "Incarnate Word Cardinals": ['Incarnate Word'],
    "Abilene Christian Wildcats": ['Abilene Christian'],
    "North Alabama Lions": ['North Alabama'],
    "California Baptist Lancers": ['California Baptist'],
    "Merrimack Warriors": ['Merrimack'],
    "Bellarmine Knights": ['Bellarmine'],
    "Utah Tech Trailblazers":["Dixie State", "Dixie St.", "Utah Tech"],
    "Tarleton State Texans":["Tarleton State", "Tarleton St."],
    "Saint Thomas Tommies": ['Saint Thomas', "St. Thomas", "St. Thomas (MN)"],
    "East Texas A&M Lions": ['East Texas A&M', "Texas A&M Commerce"],
    "Lindenwood Lions": ['Lindenwood'],
    "Southern Indiana Screaming Eagles": ['Southern Indiana'],
    "Stonehill Skyhawks": ['Stonehill'],
}

def normalize_team_name(name):
    for standard_name, aliases in prop_name_mapping.items():
        if name in aliases:
            return standard_name
        
    # print(name, "not found")
    # return name  # Return original name if no match is found

import csv
import os
import webbrowser
import requests

def load_teams(team_file):
    """Load teams from a text file into a list."""
    with open(team_file, "r", encoding="utf-8") as f:
        return [line.strip() for line in f if line.strip()]

def save_teams(team_file, teams):
    """Save remaining teams back to the text file."""
    with open(team_file, "w", encoding="utf-8") as f:
        f.writelines("\n".join(teams) + "\n")

def append_to_csv(csv_file, data, headers):
    """Append the collected data to a CSV file."""
    file_exists = os.path.isfile(csv_file)
    with open(csv_file, "a", newline="", encoding="utf-8") as f:
        writer = csv.writer(f)
        if not file_exists:
            writer.writerow(headers)  # Write headers if file is new
        writer.writerow(data)
        
def get_location_data(api_key, university):
    """Fetch city, state, latitude, longitude, and timezone from Google Maps API."""
    base_url = "https://maps.googleapis.com/maps/api/geocode/json"
    response = requests.get(base_url, params={"address": university, "key": api_key})
    if response.status_code == 200:
        data = response.json()
        if data["status"] == "OK":
            location = data["results"][0]
            lat = location["geometry"]["location"]["lat"]
            lng = location["geometry"]["location"]["lng"]
            components = {comp["types"][0]: comp["long_name"] for comp in location["address_components"]}
            city = components.get("locality", "")
            state = components.get("administrative_area_level_1", "")
            
            # Fetch timezone
            timezone_url = "https://maps.googleapis.com/maps/api/timezone/json"
            tz_response = requests.get(timezone_url, params={"location": f"{lat},{lng}", "timestamp": 0, "key": api_key})
            time_zone = tz_response.json().get("timeZoneId", "")
            
            return city, state, lat, lng, time_zone
    return "", "", "", "", ""

def main():
    # GOOGLE_API_KEY = "AIzaSyDpBS5hiWnDl-uvWqf97L8WdPv16OI0TDI"
    GOOGLE_API_KEY = "AIzaSyDpBS5hiWnDl-uvWqf97L8WdPv16OI0TDI"
    team_file = "output.txt"  # Change if needed
    csv_file = "teams_data.csv"
    # headers = ["team_name", "display_name", "mascot", "university", "abbreviation", "founded_year", "arena", "capacity", "official_website", "team_colors", "twitter_handle", "city", "state", "longitude", "latitude", "time_zone"]
    headers = ["team_name", "display_name", "mascot", "university", "abbreviation", "city", "state", "longitude", "latitude", "time_zone"]
    
    teams = load_teams(team_file)
    
    if not teams:
        print("No teams left to process!")
        return
    
    for team_name in teams[:]:  # Iterate over a copy of the list
        print(f"Processing: {team_name}")
        webbrowser.open(f"https://www.google.com/search?q={team_name}+basketball")  # Auto-search team
        
        # Manually enter data
        display_name = input("Enter Display Name: ")
        mascot = input("Enter Mascot: ")
        university = input("Enter University: ")
        abbreviation = input("Enter Abbreviation: ")
        # webbrowser.open(f"https://www.google.com/search?q={team_name}+founding+year")  # Auto-search team
        # founded_year = input("Enter Founded Year: ")
        # webbrowser.open(f"https://www.google.com/search?q={team_name}+basketball+arena")  # Auto-search team
        # arena = input("Enter Arena: ")
        # capacity = input("Enter Arena Capacity: ")
        # official_website = input("Enter Official Website: ")
        # webbrowser.open(f"https://www.google.com/search?q={team_name}+team+colors")  # Auto-search team
        # team_colors = input("Enter Team Colors: ")
        # webbrowser.open(f"https://www.google.com/search?q={team_name}+basketball+twitter")  # Auto-search team
        # twitter_handle = input("Enter Twitter Handle: ")
        # webbrowser.open(f"https://www.google.com/maps/search/{university}")  # Auto-search university in Google Maps

        # logo_url = input("Enter Logo URL: ")
        # logo_path = download_logo(logo_url, abbreviation)

        city, state, latitude, longitude, time_zone = get_location_data(GOOGLE_API_KEY, university)
        
        # Append data to CSV
        append_to_csv(csv_file, [team_name, display_name, mascot, university, abbreviation, city, state,  longitude, latitude, time_zone], headers)
        # append_to_csv(csv_file, [team_name, display_name, mascot, university, abbreviation, founded_year, arena, capacity, official_website, team_colors, twitter_handle, city, state,  longitude, latitude, time_zone], headers)
        
        # Remove processed team
        teams.remove(team_name)
        save_teams(team_file, teams)
        
        print(f"{team_name} saved! {len(teams)} teams left.")
    
    print("All teams processed!")

if __name__ == "__main__":
    main()